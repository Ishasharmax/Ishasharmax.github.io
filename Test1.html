<!DOCTYPE html>
<html lang="en">

<head>
    <title>Musist - Concept App Study</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"></script>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
    <!-- TweenMax - GSAP -->
    
    <style>
    
    .video-background {
  position: fixed;
  top: 50%;
  left: 50%;
  min-width: 100%;
  min-height: 100%;
  transform: translate(-50%, -50%);
}

#container {
  height: 500vh;
}
    
    </style>
</head>

<body>


    <video src="https://assets.codepen.io/39255/output_960.mp4" playsinline="true" webkit-playsinline="true" preload="auto" muted="muted" class="video-background"></video>

<div id="container"></div>


    <script>
console.clear();
/* The encoding is super important here to enable frame-by-frame scrubbing. */

// ffmpeg -i ~/Downloads/Toshiba\ video/original.mov -movflags faststart -vcodec libx264 -crf 23 -g 1 -pix_fmt yuv420p output.mp4
// ffmpeg -i ~/Downloads/Toshiba\ video/original.mov -vf scale=960:-1 -movflags faststart -vcodec libx264 -crf 20 -g 1 -pix_fmt yuv420p output_960.mp4

const video = document.querySelector(".video-background");
let src = video.currentSrc || video.src;
console.log(video, src);

/* Make sure the video is 'activated' on iOS */
function once(el, event, fn, opts) {
  var onceFn = function (e) {
    el.removeEventListener(event, onceFn);
    fn.apply(this, arguments);
  };
  el.addEventListener(event, onceFn, opts);
  return onceFn;
}

once(document.documentElement, "touchstart", function (e) {
  video.play();
  video.pause();
});

/* ---------------------------------- */
/* Scroll Control! */

gsap.registerPlugin(ScrollTrigger);

let tl = gsap.timeline({
  defaults: { duration: 1 },
  scrollTrigger: {
    trigger: "#container",
    start: "top top",
    end: "bottom bottom",
    scrub: true
  }
});

once(video, "loadedmetadata", () => {
  tl.fromTo(
    video,
    {
      currentTime: 0
    },
    {
      currentTime: video.duration || 1
    }
  );
});

/* When first coded, the Blobbing was important to ensure the browser wasn't dropping previously played segments, but it doesn't seem to be a problem now. Possibly based on memory availability? */
setTimeout(function () {
  if (window["fetch"]) {
    fetch(src)
      .then((response) => response.blob())
      .then((response) => {
        var blobURL = URL.createObjectURL(response);

        var t = video.currentTime;
        once(document.documentElement, "touchstart", function (e) {
          video.play();
          video.pause();
        });

        video.setAttribute("src", blobURL);
        video.currentTime = t + 0.01;
      });
  }
}, 1000);

/* ---------------------------------- */
/* ---------------------------------- */

    </script>


</body>

</html>
<!--

Customer Journey Mapping
A customer journey map illustrates the different phases in which a customer interacts with the product or service and the organization that creates it. If you have created a customer journey map, include the diagram, briefly describe the categories of information you decided to illustrate, and the design decisions that were influenced by it.
Design Solutions
List 3 - 5 design solutions that you have come up with in regards to the particular pain points that you have discovered. Describe the desired outcome of these design solutions briefly. If you have done analysis with a prioritization matrix, include the workshop photo or a diagram.
User Flow
A user flow illustrates how the user completes a task within the product or by using a service. It also makes it easy to see how each step relates to others, and the steps that can be eliminated, added or improved. If you have created a user flow, include it and briefly describe which steps you've optimized and why.
Storyboards
Storyboarding as an UX tool helps to visualize the user's experience with a product or service. If you have created a storyboard for your project, include the images.
Sketches
It is fascinating for the readers to see sketches of your design because it symbolizes the beginning of the solution taking shape. It shows your thinking process and also means that you are capable of quickly iterating ideas with minimal tools. Include a photo of your sketches, or a few sketched screens put together.

Prototype
You can embed a live prototype or record video clips of essential interactions that you'd like to explain further. Briefly describe the points you wish readers to notice when reviewing the prototype.
Conclusion
At the end of the case study, briefly summarize the journey that you just took the readers through. What are the key learnings? Was there any step that was particularly challenging? What are the next steps for this project? Are there ways to contact you if people are interested in talking with you? You can also mention project collaborators here and encourage readers to leave feedback.
-->
